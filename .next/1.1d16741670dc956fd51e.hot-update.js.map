{"version":3,"file":"1.1d16741670dc956fd51e.hot-update.js","sources":["webpack:///./node_modules/react-redux/es/connect/connect.js","webpack:///./node_modules/react-redux/es/index.js","webpack:///pages/_app.js","webpack:///store/store.js","webpack:///store/user.redux.js"],"sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport connectAdvanced from '../components/connectAdvanced';\nimport shallowEqual from '../utils/shallowEqual';\nimport defaultMapDispatchToPropsFactories from './mapDispatchToProps';\nimport defaultMapStateToPropsFactories from './mapStateToProps';\nimport defaultMergePropsFactories from './mergeProps';\nimport defaultSelectorFactory from './selectorFactory';\n\n/*\n  connect is a facade over connectAdvanced. It turns its args into a compatible\n  selectorFactory, which has the signature:\n\n    (dispatch, options) => (nextState, nextOwnProps) => nextFinalProps\n  \n  connect passes its args to connectAdvanced as options, which will in turn pass them to\n  selectorFactory each time a Connect component instance is instantiated or hot reloaded.\n\n  selectorFactory returns a final props selector from its mapStateToProps,\n  mapStateToPropsFactories, mapDispatchToProps, mapDispatchToPropsFactories, mergeProps,\n  mergePropsFactories, and pure args.\n\n  The resulting final props selector is called by the Connect component instance whenever\n  it receives new props or store state.\n */\n\nfunction match(arg, factories, name) {\n  for (var i = factories.length - 1; i >= 0; i--) {\n    var result = factories[i](arg);\n    if (result) return result;\n  }\n\n  return function (dispatch, options) {\n    throw new Error('Invalid value of type ' + typeof arg + ' for ' + name + ' argument when connecting component ' + options.wrappedComponentName + '.');\n  };\n}\n\nfunction strictEqual(a, b) {\n  return a === b;\n}\n\n// createConnect with default args builds the 'official' connect behavior. Calling it with\n// different options opens up some testing and extensibility scenarios\nexport function createConnect() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$connectHOC = _ref.connectHOC,\n      connectHOC = _ref$connectHOC === undefined ? connectAdvanced : _ref$connectHOC,\n      _ref$mapStateToPropsF = _ref.mapStateToPropsFactories,\n      mapStateToPropsFactories = _ref$mapStateToPropsF === undefined ? defaultMapStateToPropsFactories : _ref$mapStateToPropsF,\n      _ref$mapDispatchToPro = _ref.mapDispatchToPropsFactories,\n      mapDispatchToPropsFactories = _ref$mapDispatchToPro === undefined ? defaultMapDispatchToPropsFactories : _ref$mapDispatchToPro,\n      _ref$mergePropsFactor = _ref.mergePropsFactories,\n      mergePropsFactories = _ref$mergePropsFactor === undefined ? defaultMergePropsFactories : _ref$mergePropsFactor,\n      _ref$selectorFactory = _ref.selectorFactory,\n      selectorFactory = _ref$selectorFactory === undefined ? defaultSelectorFactory : _ref$selectorFactory;\n\n  return function connect(mapStateToProps, mapDispatchToProps, mergeProps) {\n    var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n        _ref2$pure = _ref2.pure,\n        pure = _ref2$pure === undefined ? true : _ref2$pure,\n        _ref2$areStatesEqual = _ref2.areStatesEqual,\n        areStatesEqual = _ref2$areStatesEqual === undefined ? strictEqual : _ref2$areStatesEqual,\n        _ref2$areOwnPropsEqua = _ref2.areOwnPropsEqual,\n        areOwnPropsEqual = _ref2$areOwnPropsEqua === undefined ? shallowEqual : _ref2$areOwnPropsEqua,\n        _ref2$areStatePropsEq = _ref2.areStatePropsEqual,\n        areStatePropsEqual = _ref2$areStatePropsEq === undefined ? shallowEqual : _ref2$areStatePropsEq,\n        _ref2$areMergedPropsE = _ref2.areMergedPropsEqual,\n        areMergedPropsEqual = _ref2$areMergedPropsE === undefined ? shallowEqual : _ref2$areMergedPropsE,\n        extraOptions = _objectWithoutProperties(_ref2, ['pure', 'areStatesEqual', 'areOwnPropsEqual', 'areStatePropsEqual', 'areMergedPropsEqual']);\n\n    var initMapStateToProps = match(mapStateToProps, mapStateToPropsFactories, 'mapStateToProps');\n    var initMapDispatchToProps = match(mapDispatchToProps, mapDispatchToPropsFactories, 'mapDispatchToProps');\n    var initMergeProps = match(mergeProps, mergePropsFactories, 'mergeProps');\n\n    return connectHOC(selectorFactory, _extends({\n      // used in error messages\n      methodName: 'connect',\n\n      // used to compute Connect's displayName from the wrapped component's displayName.\n      getDisplayName: function getDisplayName(name) {\n        return 'Connect(' + name + ')';\n      },\n\n      // if mapStateToProps is falsy, the Connect component doesn't subscribe to store state changes\n      shouldHandleStateChanges: Boolean(mapStateToProps),\n\n      // passed through to selectorFactory\n      initMapStateToProps: initMapStateToProps,\n      initMapDispatchToProps: initMapDispatchToProps,\n      initMergeProps: initMergeProps,\n      pure: pure,\n      areStatesEqual: areStatesEqual,\n      areOwnPropsEqual: areOwnPropsEqual,\n      areStatePropsEqual: areStatePropsEqual,\n      areMergedPropsEqual: areMergedPropsEqual\n\n    }, extraOptions));\n  };\n}\n\nexport default createConnect();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-redux/es/connect/connect.js\n// module id = ./node_modules/react-redux/es/connect/connect.js\n// module chunks = 1 4","import Provider, { createProvider } from './components/Provider';\nimport connectAdvanced from './components/connectAdvanced';\nimport connect from './connect/connect';\n\nexport { Provider, createProvider, connectAdvanced, connect };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-redux/es/index.js\n// module id = ./node_modules/react-redux/es/index.js\n// module chunks = 1 4","import App, {Container} from 'next/app'\r\nimport React from 'react'\r\nimport withReduxStore from '../lib/with-redux-store'\r\nimport { Provider } from 'react-redux'\r\n\r\nclass MyApp extends App {\r\n  render () {\r\n    const {Component, pageProps, reduxStore} = this.props\r\n    return (\r\n      <Container>\r\n        <Provider store={reduxStore}>\r\n          <Component {...pageProps} />\r\n        </Provider>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withReduxStore(MyApp)\n\n\n// WEBPACK FOOTER //\n// pages/_app.js","import { createStore, applyMiddleware } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { combineReducers } from 'redux'\r\nimport { user } from './user.redux'\r\n// import { chartuser } from './redux/chatuser.redux'\r\n// import { chat } from './redux/chat.redux'\r\n  export function initializeStore () {\r\n    return createStore(combineReducers({user}), composeWithDevTools(applyMiddleware(thunkMiddleware)))\r\n  }\n\n\n// WEBPACK FOOTER //\n// store/store.js","import axios from 'axios'\r\nimport {userLogin, userUpdate, userRegister} from '../api/user'\r\nimport {getRedirectPath} from '../lib/util'\r\n// const REGISTER_SUCCESS = 'REGISTER_SUCCESS'\r\nconst ERROR_MSG = 'ERROR_MSG'\r\nconst LOGOUT_SUCCESS = 'LOGOUT_SUCCESS'\r\nconst AUTH_SUCCESS = 'AUTH_SUCCESS'\r\nconst LOAD_DATA = 'LOAD_DATA'\r\nconst initState={\r\n    redirectTo: '',\r\n    isAuth: '',\r\n    mgs: '',\r\n    user: '',\r\n    type: ''\r\n}\r\n\r\n\r\nexport function regisger({user, pwd, repeatpwd, type}) {\r\n    if (!user || !pwd || !type) {\r\n        return errorMsg('用户名密码必须输入')\r\n    }\r\n    if (pwd !== repeatpwd) {\r\n        return errorMsg('密码和确认密码不相同')\r\n    }\r\n    return dispatch=> {\r\n        userRegister({user, pwd, type}).then(res => {\r\n                if (res.status === 200 && res.data.code === 0) {\r\n                    dispatch(authSuccess({user,pwd,type}))\r\n                } else {\r\n                    dispatch(errorMsg(res.data.msg))\r\n                } \r\n            })\r\n    }\r\n\r\n}\r\nexport function loginfn({user, pwd}) {\r\n    \r\n    // if( !user || !pwd) {\r\n    //     console.log(user, pwd)\r\n    //     return errorMsg('用户名密码必须输入')\r\n    // }\r\n    return dispatch=> {\r\n        userLogin({user, pwd}).then(res => {\r\n                if (res.status === 200 && res.data.code === 0) {\r\n                    dispatch(authSuccess(res.data.data))\r\n                } else {\r\n                    dispatch(errorMsg(res.data.msg))\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function logoutSubmit() {\r\n    return {type: LOGOUT_SUCCESS}\r\n}\r\n\r\nexport function update(data) {\r\n    return dispatch=> {\r\n        userUpdate(data).then(res => {\r\n                if (res.status === 200 && res.data.code === 0) {\r\n                    dispatch(authSuccess(res.data.data))\r\n                } else {\r\n                    dispatch(errorMsg(res.data.msg))\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function loadData(userInfo) {\r\n    return {type: LOAD_DATA, payload: userInfo}\r\n}\r\nfunction errorMsg(msg) {\r\n    return {msg, type: ERROR_MSG}\r\n}\r\n\r\n\r\nfunction authSuccess(obj) {\r\n    const {pwd, ...data} = obj\r\n    console.log(data)\r\n    return {type: AUTH_SUCCESS, payload: data}\r\n}\r\n//reducer\r\nexport function user(state=initState, action) {\r\n    switch(action.type) {\r\n        case AUTH_SUCCESS: \r\n        return {...state, msg: '', redirectTo: getRedirectPath(action.payload), isAuth: true, ...action.payload}\r\n        case LOAD_DATA: \r\n            return {...state, ...action.payload}\r\n        case LOGOUT_SUCCESS: \r\n            return  {...initState, redirectTo: '/login'}\r\n        case ERROR_MSG:\r\n            return {...state, isAuth: false, msg: action.msg}\r\n        default:\r\n            return state\r\n    }\r\n    return state\r\n}\n\n\n// WEBPACK FOOTER //\n// store/user.redux.js"],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AAVA;AACA;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AASA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAVA;AACA;AAWA;AACA;;;;A","sourceRoot":""}